name: shiftvit_cifar10_adaptive
entrypoint: model_def:ShiftViTTrial
data:
  dataset_name: cifar10
  download_dir: /data
  num_workers: 4
  pin_memory: True
  persistent_workers: True
records_per_epoch:
  50000
hyperparameters:
  global_batch_size: 512
  # ShiftViT model args
  model:
    n_div:
      type: categorical
      vals: [ 8, 12, 16 ]
    patch_size: 2
    embed_dim: 96
    depths: [ 2, 2, 6, 2 ]
    mlp_ratio: 4.0
    drop_rate:
      type: double
      minval: 0.1
      maxval: 0.5
    drop_path_rate:
      type: double
      minval: 0.1
      maxval: 0.5
    norm_layer: GN1
    act_layer: GELU
    patch_norm: True
    use_checkpoint: False
  # timm.optim.create_optimizer args
  optimizer:
    opt: adamw
    lr:
      type: log
      minval: -5.0
      maxval: -2.0
      base: 10.0
    opt_eps: 1.0e-8
    opt_betas: null
    clip_grad: null
    momentum: 0.9
    weight_decay: 0.05
  # timm.scheduler.create_schedulers args
  scheduler:
    sched: cosine
    epochs: 16
    lr_noise: null
    lr_noise_pct: 0.67
    lr_noise_std: 1.0
    warmup_lr: 1.0e-6
    min_lr: 1.0e-5
    warmup_epochs: 1
    cooldown_epochs: 0
  # timm.data.create_transform args
  transform:
    scale: [ 0.9, 1.0 ]
    ratio: [ .9, 1.1 ]
    hflip: 0.5
    vflip: 0.
    color_jitter: 0.1
    auto_augment: null
    interpolation: bicubic
    re_prob: 0.1
    re_mode: pixel
    re_count: 1
min_validation_period:
  epochs: 1
searcher:
  name: adaptive_asha
  metric: validation_loss
  max_length:
    epochs: 16 # epochs + cooldown_epochs from scheduler
  max_trials: 64
  smaller_is_better: True
max_restarts: 0
