name: detsd_finetune
entrypoint: python3 -m determined.launch.torch_distributed python3 finetune.py
searcher:
  name: single
  metric: loss
  max_length: 500 # Number of SGD steps.
resources:
  slots_per_trial: 2
max_restarts: 1
environment:
    environment_variables:  
        - HF_AUTH_TOKEN=YOUR_HF_AUTH_TOKEN_HERE
checkpoint_storage:
    save_trial_latest: 5
hyperparameters:
    model:
        pretrained_model_name_or_path: CompVis/stable-diffusion-v1-4
    concepts:
        learnable_properties: # One of 'object' or 'style'. 
            - object
        concept_tokens: # Special tokens representing new concepts. Must not exist in tokenizer.  
            - <det-logo>
        initializer_tokens: # Phrases which are closely related to added concepts.
            - brain logo, concept art
        img_dirs:
            - det_logos
    training:
        train_batch_size: 1
        gradient_accumulation_steps: 4
        optimizer_name: adam
        learning_rate: 5e-4
        checkpoint_freq: 100
        metric_report_freq: 100
    inference:
        generate_training_images: True
        images_per_prompt: 3
        inference_prompts:
          - a watercolor painting of a <det-logo>
          - a Van Gogh painting of a <det-logo> with vibrant colors, thick strokes, masterpiece, incredible composition
          - a charcoal sketch of a <det-logo>

    
