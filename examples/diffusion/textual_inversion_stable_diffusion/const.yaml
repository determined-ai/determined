name: stable_diffusion_textual_inversion
entrypoint: python -m determined.launch.torch_distributed accelerate launch main.py
searcher:
  name: single
  metric: loss
  max_length: 250
resources:
  slots_per_trial: 4
max_restarts: 0
environment:
    environment_variables:  
        - HF_AUTH_TOKEN=YOUR_HF_AUTH_TOKEN_HERE
checkpoint_storage:
    save_trial_best: 1
    save_trial_latest: 1
hyperparameters:
    model:
        pretrained_model_name_or_path: CompVis/stable-diffusion-v1-4
    data:
        learnable_properties: # One of 'object' or 'style' 
            - object
        placeholder_tokens: # Special tokens representing new concepts. Must not exist in tokenizer.  
            - <cat-toy>
        initializer_tokens: # Individual words closely related to added concepts. Must get mapped to single token by tokenizer. 
            - cat
        train_img_dirs: # Directories holding training images.
            - cat_imgs
    trainer:
        train_batch_size: 1
        gradient_accumulation_steps: 4
        optimizer_name: adamw
        learning_rate: 5e-05
    inference:
        inference_prompts:
            - a photo of a <cat-toy>
    
