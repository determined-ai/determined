/* Contains all of the namespaces involved in namespace-workspace bindings. */
CREATE TABLE workspace_namespace (
    id                      integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    namespace_name          varchar(63),
    cluster_name            varchar(80) NOT NULL,
    workspace_id            integer REFERENCES workspaces (id)
);


/* Add RBAC permissions for creating/updating/deleting namespace-workspace bindings and resource quotas. */
INSERT into permissions(id, name, global_only) VALUES 
    (11001, 'modify workspace-namespace bindings', true), 
    (11002, 'modify resource quotas', true);
   
INSERT INTO permission_assignments(permission_id, role_id)
SELECT permissions.id, 1 FROM permissions WHERE permissions.name IN (
    'modify workspace-namespace bindings',
    'modify resource quotas'
);
